<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Subject-Based Query</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
}
.container {
    width: 70%;
    margin: 50px auto;
    padding: 20px;
    background: white;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    border-radius: 10px;
}
select, input {
    width: 70%;
    padding: 10px;
    margin: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}
button {
    padding: 10px 15px;
    background-color: #007BFF;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
}
button:hover {
    background-color: #0056b3;
}
.response-box {
    margin-top: 20px;
    padding: 10px;
    background: #eee;
    border-radius: 5px;
    text-align: left;
}
h2 {
    color: #007BFF;
}
b {
    font-weight: bold;
}

#chapterTable {
    border-collapse: collapse;
    width: auto; /* Only takes necessary width */
}

#chapterTable td {
    padding: 5px 10px;
    border: none;
    text-align: left;
    white-space: nowrap;
}

#chapterTable label {
    display: inline-flex;
    align-items: center;
    gap: 5px; /* Ensures checkbox is exactly after text */
}







#chapterList label {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
    cursor: pointer;
}


#chapterList input[type="checkbox"] {
    margin-right: 5px;
    vertical-align: middle;
}

.heading {
  font-size: 18px;
  font-weight: bold;
  color: #333;
}

.bold {
  font-weight: bold;
  color: black;
}

.bordered {
    border: 2px solid black;
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
}

.bordered {
    border: 2px solid black;
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
    background-color: #5591f2; /* Blue background */
    color: white;
    font-size: 16px;
    line-height: 1.5;
}

.heading {
    font-weight: bold;
    font-size: 18px;
    margin-top: 15px;
}

.bold {
    font-weight: bold;
    color: yellow; /* Highlighted bold text */
}

.bordered {
    border: 2px solid black;
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
    background-color: #007bff;
    color: white;
    font-size: 16px;
    line-height: 1.5;
    overflow-x: auto; /* Prevents large equations from breaking layout */
}

.heading {
    font-weight: bold;
    font-size: 18px;
    margin-top: 15px;
}

.bold {
    font-weight: bold;
    color: yellow;
}
    </style>
    
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="container">
        <h2>Ask AI a Subject-Specific Question</h2>
        <form id="aiForm">
            <label>Select Subject:</label>
            <select id="subjectSelect">
                <option value="physics">Physics</option>
                <option value="chemistry">Chemistry</option>
                <option value="maths" selected>Maths</option>
            </select>
            
            <label>Select Chapters:</label>
            <table id="chapterTable"></table>

            <input type="text" id="userInput" placeholder="Enter your question..." required>
            <button type="submit" id="Generate">Generate</button>
        </form>
        <div class="response-box">
            <h3>Response:</h3>
            <div id="responseText"></div>
        </div>
    </div>

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\', '\']],
                displayMath: [['$$', '$$'], ['\', '\']]
            },
            svg: { fontCache: 'global' }
        };

        const chapters = {
            maths: [
                "Sets", "Relations and Functions", "Trigonometric Functions", "Principle of Mathematical Induction", "Complex Numbers and Quadratic Equations",
                "Linear Inequalities", "Permutations and Combinations", "Binomial Theorem", "Sequences and Series", "Straight Lines",
                "Conic Sections", "Introduction to Three Dimensional Geometry", "Limits and Derivatives", "Mathematical Reasoning", "Statistics", "Probability"
            ],
            chemistry: [
                "Some Basic Concepts of Chemistry", "Structure of Atom", "Classification of Elements and Periodicity in Properties",
                "Chemical Bonding and Molecular Structure", "Thermodynamics", "Equilibrium", "Redox Reactions",
                "Organic Chemistry - Some Basic Principles and Techniques", "Hydrocarbons"
            ],
            physics: [
                "Units and Measurements", "Motion in a Straight Line", "Motion in a Plane", "Laws of Motion", "Work, Energy, and Power",
                "System of Particles and Rotational Motion", "Gravitation", "Mechanical Properties of Solids", "Mechanical Properties of Fluids",
                "Thermal Properties of Matter", "Thermodynamics", "Kinetic Theory", "Oscillations", "Waves"
            ]
        };

        document.getElementById("subjectSelect").addEventListener("change", function () {
            const subject = this.value;
            const chapterTable = document.getElementById("chapterTable");
            chapterTable.innerHTML = ""; 

            if (!subject || !chapters[subject]) return;

            let rows = "";
            for (let i = 0; i < chapters[subject].length; i += 2) {
                const col1 = chapters[subject][i] || "";
                const col2 = chapters[subject][i + 1] || "";
                rows += `
                    <tr>
                        <td><label>${col1} <input type="checkbox" value="${col1}"></label></td>
                        <td><label>${col2} <input type="checkbox" value="${col2}"></label></td>
                    </tr>
                `;
            }

            chapterTable.innerHTML = rows;
        });

        document.getElementById("aiForm").addEventListener("submit", function (event) {
            event.preventDefault();

            const subject = document.getElementById("subjectSelect").value;
            const userInput = document.getElementById("userInput").value.trim();
            const selectedChapters = [];

            document.querySelectorAll("#chapterTable input:checked").forEach(checkbox => {
                selectedChapters.push(checkbox.value);
            });

            if (!userInput || selectedChapters.length === 0) {
                document.getElementById("responseText").innerHTML = "<p class='error'>Please enter a question and select at least one chapter.</p>";
                return;
            }

            const apiKey = "AIzaSyAoYNb5MO70jFV3Rn2CVXT9Jps29q1fTg8"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            const requestBody = {
                contents: [
                    {
                        parts: [
                            {
                                text: `Subject: ${subject}\nChapters: ${selectedChapters.join(", ")}\nQuestion: ${userInput} of class 11, and only provide question and nothing else no comment no greeting also properly format fractions, exponents, etc if any, dont highlight question with * or **, especially take care of any dollar sign in any Mathematical question to be formatted properly avoid these type of formats How many grams of $H_2O$ are produced when 2.0 g of $H_2$ reacts with 16.0 g of $O_2$? or If the root mean square velocity ($v_{rms}$) of gas molecules at temperature T is given by $v_{rms} = \sqrt{\frac{3RT}{M}}$, and the temperature is increased to 4 times its initial value, by what factor does the $v_{rms}$ change?, i am using mathjax in html to format questions, so make questions using mathjax formatting techniques if required , for example  not make this The pressure of a gas is given by $P = \frac{1}{3} \rho v_{rms}^2$. If the density $\rho$ is doubled and the root mean square velocity $v_{rms}$ is halved, by what factor does the pressure change? instead The pressure of a gas is given by \( P = \frac{1}{3} \rho v_{\text{rms}}^2 \).  
If the density \( \rho \) is doubled and the root mean square velocity \( v_{\text{rms}} \) is halved,  
by what factor does the pressure change?
 also make heading started with ** and ended with ** , also ignore any full stop marks`
                            }
                        ]
                    }
                ]
            };

            fetch(apiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(requestBody)
            })
            .then(response => response.json())
            .then(data => {
                let aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "No response received.";
                let formattedResponse = formatResponse(aiResponse);
                document.getElementById("responseText").innerHTML = formattedResponse;
            })
            .catch(error => {
                document.getElementById("responseText").innerHTML = "<p class='error'>Error fetching response.</p>";
                console.error("Fetch error:", error);
            });
        });

        function formatResponse(text) {
            let formattedText = "";
            let lines = text.split("\n").filter(line => line.trim() !== "");

            for (let line of lines) {
                if (line.startsWith("**") && line.endsWith("**")) {
                    formattedText += `<p class="heading">${line.slice(2, -2)}</p>`;
                } else {
                    let formattedLine = line
                        .replace(/\$(.*?)\$/g, "\$1\")  
                        .replace(/\$\$(.*?)\$\$/g, "\$1\"); 

                    formattedText += `<p class="bordered">${formattedLine}</p>`;
                }
            }

            setTimeout(() => {
                if (window.MathJax && MathJax.typesetPromise) {
                    MathJax.typesetPromise();
                }
            }, 50);

            return formattedText;
        }

        window.formatResponse = formatResponse;

        document.getElementById("subjectSelect").dispatchEvent(new Event("change"));
    </script>
</body>
</html>
